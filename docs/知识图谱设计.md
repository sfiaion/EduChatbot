# 知识图谱设计

## 图谱页面

顶部是页眉或边栏，教师可以选择

**班级：** 路由是 `/api/teacher/classes`。可以返回教师教的全部班级。前端可以设置下拉框供教师选择班级，之后所有的查询都是基于当前班级。目前教师id写死为1。

**中心节点：**路由是 `/api/knowledge/search`。前端可以设置成搜索框，输入一个词，可以返回包含这个词的全部知识点，例如输入“正切”，可以返回“正切函数的定义”，“正切函数单调性”等。

**时间段：**包括起始时间和截止时间，日期格式为YYYY-MM-DD，之后所有的查询，返回的都是这段时间内的数据。（不过前端最好限制一下时间段的长度，比如最短不短于7天，最长不超过30天，不然之后折线图可能不好画）

其余页面依旧显示的是中心节点和它的前驱后继，和原来保持一致。

**班级异常错误增长点：**路由是 `/api/knowledge-graph/breakpoints`。 错误差值指，当前节点错误数量减去其所有前驱节点中最大的错误数量得到的差值。整个图谱中，错误差值最大的前k个点是班级异常错误增长点。可以告诉教师学生是具体从哪里开始掌握情况下降的，“崩坏”的地方是哪里。

## 知识点详情页面

点击图谱中心节点，跳转到知识点详情页面，路由是 `/api/knowledge-graph/node/{name}`。返回内容如下：

节点名称

当前节点的错误总次数

当前节点的每日错误数：可用于绘制折线图

节点内容

当前节点的最长前置路径：从所有入口出发，到当前节点的路径中，最长的一条路径的长度

高频前置节点以及它们的总错误次数：高频前置节点是前置节点中“重要的节点”，不是靠错误数判定的，而是结构性指标，只与图结构有关。如果学生在当前知识点掌握的不好，很可能是某个高频前置节点掌握的不好，导致这个节点也掌握不好。